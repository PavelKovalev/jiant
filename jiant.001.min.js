var jiant=jiant||function(e){function b(e,t,n){if(!e||!e.length){window.console&&window.console.error&&(n?S("non existing object referred by class under object id '"+t+"', check stack trace for details, expected obj class: "+n):S("non existing object referred by id, check stack trace for details, expected obj id: "+t));if(n){y+="   ,    #"+t+" ."+n}else{y+=", #"+t}g=false}}function w(t,n){n=n||{};var r=t.html().trim(),i={},s="";try{var o=i[r];if(!o){var u="var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+r.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"  ").split("'").join("\\'").split("	").join("'").replace(/!!(.+?)!!/g,"',$1,'").split("!?").join("');").split("?!").join("p.push('")+"');}return p.join('');";o=new Function("obj",u);i[r]=o}return e.trim(o(n))}catch(a){s=a.message}return"!!! ERROR: "+s.toString()+" !!!"}function E(e){e.keydown(function(t){if(t.keyCode==key.down&&e.val()>0){e.val(e.val()-1);return false}else if(t.keyCode==key.up){e.val(e.val()+1);return false}else if(t.keyCode==key.backspace||t.keyCode==key.del||t.keyCode==key.end||t.keyCode==key.home||t.keyCode==key.tab||t.keyCode==key.enter){}else if(t.shiftKey||(t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)){t.preventDefault();return false}return true})}function S(e){window.console&&window.console.error&&window.console.error(e)}function x(e){window.console&&window.console.info&&window.console.info(e)}function T(n){function s(t,n){var s=e(w(e("<b><li class='!!ctlClass!!'><a>!!label!!</a></li></b>"),{label:t,ctlClass:n}));i.append(s);s.click(function(){r.trigger("ValueChange",t)})}var r=e({}),i=e("<ul></ul>");n.addClass("pagination");n.append(i);n.onValueChange=function(e){r.on("ValueChange",e)};n.updatePager=function(e){i.empty();var n=Math.max(0,e.number-t/2),r=Math.min(e.number+t/2,e.totalPages);for(var o=n;o<r;o++){var u="";if(o==e.number){u+=" active"}s(o+1,u)}}}function N(t,n,r,i,s){e.each(r,function(r,o){if(t[r]==h){x("    loookup element, no checks/bindings: "+r);t[r]=function(){return e("."+s+r)}}else{var u=i.find("."+s+r);b(u,s+n,s+r);if(o==m){u.tabs()}else if(o==l){E(u)}else if(o==p){T(u)}t[r]=u;x("    bound UI for: "+r)}})}function C(t,n){e.each(t,function(e,t){if(n[e]){S("unsafe extension: "+e+" already defined in base jQuery, shouldn't be used")}})}function k(t,n){t=t||"";e.each(n,function(r,i){x("binding UI for view: "+r);var s=e("#"+t+r);b(s,t+r);N(n[r],r,i,s,t);C(n[r],s);e.extend(n[r],s)})}function L(t,n){t=t||"";e.each(n,function(r,i){x("binding UI for template: "+r);var s=e("#"+t+r);b(s,t+r);e.each(i,function(e,i){n[r][e]=s.find("."+t+e);b(n[r][e],t+r,t+e)});n[r].parseTemplate=function(n){var r=e(w(s,n));e.each(i,function(e,n){r[e]=r.find("."+t+e)});return r};n[r].parseTemplate2Text=function(e){return w(s,e)}})}function A(e){var t=e.toString();return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)}function O(t){e.each(t,function(e,n){x("binding ajax for function: "+e);var r=A(n);r.splice(r.length-1,1);t[e]=M(e,r)})}function M(t,n){return function(){var r={},i=arguments[arguments.length-1],s=arguments;e.each(n,function(t,n){if(t<s.length-1){var i=s[t];if(e.isArray(i)){r[n]=i}else if(e.isPlainObject(i)){e.each(i,function(e,t){r[n+"."+e]=t})}else{r[n]=i}}});if(!r["antiCache3721"]){r["antiCache3721"]=(new Date).getTime()}e.ajax(t,{data:r,traditional:true,success:function(t){if(i){try{t=e.parseJSON(t)}catch(n){}i(t)}},error:function(e,t,n){jiant.handleErrorFn(e.responseText)}})}}function _(e){S(e)}function D(e,t){y="";g=true;if(t.views){k(e,t.views)}if(t.templates){L(e,t.templates)}if(t.ajax){O(t.ajax)}if(!g){alert("Some elements not bound to HTML properly, check console"+y)}}var t=6,n={},r={},i={},s={},o=function(e){},u={},a={},f={},l={},c={},h=function(e){},p={},d={},v=function(){var e="not available";if(arguments&&arguments.callee&&arguments.callee.caller){e=arguments.callee.caller.name}alert("stub called from function: "+e)},m={},g=true,y;return{bindUi:D,handleErrorFn:_,logInfo:x,logError:S,collection:n,container:r,ctl:i,fn:o,form:s,grid:u,image:a,input:f,inputInt:l,label:c,lookup:h,pager:p,slider:d,stub:v,tabs:m}}(jQuery)
