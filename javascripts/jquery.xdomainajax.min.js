jQuery.ajax=function(b){var a=location.protocol,e=RegExp(a+"//"+location.hostname),g="http"+(/^https/.test(a)?"s":"")+"://query.yahooapis.com/v1/public/yql?callback=?";return function(a){var f=a.url;if(/get/i.test(a.type)&&!/json/i.test(a.dataType)&&!e.test(f)&&/:\/\//.test(f)){a.url=g;a.dataType="json";a.data={q:'select * from html where url="{URL}" and xpath="*"'.replace("{URL}",f+(a.data?(/\?/.test(f)?"&":"?")+jQuery.param(a.data):"")),format:"xml"};!a.success&&a.complete&&(a.success=a.complete,
delete a.complete);var d=a.success;a.success=function(a){jiant.logError("succ",d,"data",a);d&&d.call(this,{responseText:(a.results[0]||"").replace(/<script[^>]+?\/>|<script(.|\s)*?\/script>/gi,"")},"success")}}return b.apply(this,arguments)}}(jQuery.ajax);
window.XDomainRequest&&jQuery.ajaxTransport(function(b){if(b.crossDomain&&b.async){b.timeout&&(b.xdrTimeout=b.timeout,delete b.timeout);var a;return{send:function(e,g){function c(b,d,c,e){a.onload=a.onerror=a.ontimeout=jQuery.noop;a=void 0;g(b,d,c,e)}a=new XDomainRequest;a.onload=function(){c(200,"OK",{text:a.responseText},"Content-Type: "+a.contentType)};a.onerror=function(){c(404,"Not Found")};a.onprogress=jQuery.noop;a.ontimeout=function(){c(0,"timeout")};a.timeout=b.xdrTimeout||Number.MAX_VALUE;
b.type="GET";a.open(b.type,b.url);a.send(b.hasContent&&b.data||null)},abort:function(){a&&(a.onerror=jQuery.noop,a.abort())}}}});
